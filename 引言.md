# 引言

## 什么是设计模式

**对用来在特定场景下解决一般设计问题的类和相互通信的对象的描述**

四个基本要素：

- 模式名：一个助记名
- 问题：描述了应该在何时使用模式
- 解决方案：描述了设计的组成成分、它们之间的互相关系以及各自的职责和协作方式
- 效果：描述了模式应用的效果及使用模式应权衡的问题

## 设计模式怎样解决问题

- 寻找合适的对象：帮你确定并不明显的抽象和描述这些抽象的对象

- 决定对象的粒度：决定一个对象应该是什么

- 指定对象接口：

  - 确定接口的主要组成成分及经接口发送的数据类型
  - 确定接口中不应该包括哪些东西
  - 指定接口之间的关系

- 描述对象的实现：

  - **类**和**类型**的区别：对象的**类**定义了对象是怎样实现的，同时也定义了对象的内部状态和操作的实现；对象的**类型**只与它的接口有关，接口即对象能相应的请求的集合。
  - **对接口编程，而不是对实现编程**：可以极大地减少子系统之间的互相依赖

- 运用复用机制：

  - **继承**和**组合**的比较：**继承**破坏了封装性，子类和父类之间的依赖关系限制了灵活性，最终限制了复用性；**组合**让程序更难理解，有时会导致运行低效。**优先使用对象组合，而不是类继承**
  - 委托：委托是一种组合办法，它使组合具有与继承同样的复用能力。在委托方式下，两个对象参与处理一个请求，接收请求的对象将操作委托给它的**代理者**

- 关联运行时和编译时的结构：

  - 聚合：一个对象拥有另一个对象或对另一个对象负责，它们具有相同的生命周期，强耦合
  - 相识：一个对象仅仅知道另一个对象，弱耦合

- 设计应支持变化：一个不考虑系统变化的设计在将来会需要重新设计

  重新设计的一般原因：

  1. 通过显示地指定一个类来创建对象：间接地创建对象
  2. 对特殊操作的依赖
  3. 对硬件和平台的依赖
  4. 对对象表示或实现的依赖：对客户隐藏对象的信息
  5. 算法依赖：有可能发生变化的算法应该被孤立起来
  6. 紧耦合：使用抽象耦合和分层技术
  7. 通过生成子类来扩充功能：用组合而不是继承
  8. 不能方便地对类进行修改

## 怎样选择设计模式

- 考虑设计模式是怎样解决问题的
- 浏览模式的意图部分
- 研究模式怎样相互关联
- 研究目的相似的模式
- 检查重新设计的原因
- 考虑设计中哪些是可变的